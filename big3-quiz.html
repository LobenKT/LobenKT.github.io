<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Which Big 3 University Stereotype Are You?</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --up-maroon: #8B0000;
            --admu-blue: #003366;
            --dlsu-green: #006633;
            --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        * {
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: var(--gradient-bg);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .card {
            border: none;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            background: rgba(255,255,255,0.95);
        }

        .landing-title {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 1rem;
            text-shadow: var(--text-shadow);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #666;
            text-align: center;
            margin-bottom: 2rem;
        }

        .btn-start {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn-start:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            color: white;
        }

        .question-card {
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .choice-btn {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            margin: 10px 0;
            transition: all 0.3s ease;
            text-align: left;
            width: 100%;
            font-size: 1rem;
        }

        .choice-btn:hover {
            border-color: #4ecdc4;
            background: linear-gradient(45deg, rgba(78, 205, 196, 0.1), rgba(255, 107, 107, 0.1));
            transform: translateX(10px);
        }

        .progress-bar {
            height: 10px;
            border-radius: 10px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            transition: width 0.5s ease;
        }

        .result-card {
            text-align: center;
            animation: bounceIn 0.8s ease-out;
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .result-image {
            max-width: 90%;
            width: 300px;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            margin: 20px auto;
            display: block;
        }

        .share-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .share-btn {
            padding: 12px 20px;
            border-radius: 50px;
            border: none;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .share-btn.facebook {
            background: #3b5998;
        }

        .share-btn.twitter {
            background: #1da1f2;
        }

        .share-btn.instagram {
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
        }

        .share-btn.download {
            background: #28a745;
        }

        .nickname-input {
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 15px 20px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .nickname-input:focus {
            border-color: #4ecdc4;
            box-shadow: 0 0 0 0.2rem rgba(78, 205, 196, 0.25);
        }

        .university-colors {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .color-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .up-color { background: var(--up-maroon); }
        .admu-color { background: var(--admu-blue); }
        .dlsu-color { background: var(--dlsu-green); }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @media (max-width: 768px) {
            .landing-title {
                font-size: 2rem;
            }
            
            .quiz-container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="quiz-container">
            <!-- Landing View -->
            <div v-if="currentView === 'landing'" class="card p-5">
                <h1 class="landing-title">Which "Big 3" University Stereotype Are You?</h1>
                <p class="subtitle">Discover your Filipino university personality! ðŸŽ“</p>
                
                <div class="university-colors">
                    <div class="color-dot up-color"></div>
                    <div class="color-dot admu-color"></div>
                    <div class="color-dot dlsu-color"></div>
                </div>
                
                <!-- Optional IG Handle Input -->
                <div class="mb-4">
                    <label for="igHandle" class="form-label text-muted">Instagram Handle (optional)</label>
                    <input 
                        type="text" 
                        id="igHandle"
                        v-model="userIgHandle" 
                        class="form-control nickname-input" 
                        placeholder="@yourhandle"
                        maxlength="30"
                    >
                    <small class="text-muted">This will appear on your result card for extra flex ðŸ“¸</small>
                </div>
                
                <button 
                    @click="startQuiz" 
                    class="btn btn-start w-100"
                >
                    <i class="fas fa-play me-2"></i>Start Quiz
                </button>
            </div>

            <!-- Quiz View -->
            <div v-if="currentView === 'quiz'" class="card p-4 question-card">
                <div class="mb-3">
                    <div class="progress" style="height: 10px;">
                        <div 
                            class="progress-bar" 
                            :style="{width: ((currentQuestion + 1) / quizData.questions.length) * 100 + '%'}"
                        ></div>
                    </div>
                    <small class="text-muted">Question {{ currentQuestion + 1 }} of {{ quizData.questions.length }}</small>
                </div>

                <h3 class="mb-4">{{ quizData.questions[currentQuestion].question }}</h3>

                <div class="choices">
                    <button 
                        v-for="(choice, index) in quizData.questions[currentQuestion].choices"
                        :key="index"
                        @click="selectAnswer(choice)"
                        class="choice-btn"
                    >
                        <i :class="choice.icon" class="me-3"></i>
                        {{ choice.text }}
                    </button>
                </div>
            </div>

            <!-- Result View -->
            <div v-if="currentView === 'result'" class="card p-4 result-card">
                <h2 class="mb-3">Your Result:</h2>
                <canvas ref="resultCanvas" width="1080" height="1920" style="display: none;"></canvas>
                <img v-if="resultImageUrl" :src="resultImageUrl" alt="Your Result" class="result-image img-fluid shadow-lg rounded">
                
                <div class="mt-4">
                    <h4>{{ finalResult.title }}</h4>
                    <p class="lead mb-2"><strong>"{{ finalResult.tagline }}"</strong></p>
                    <p class="mb-3">{{ finalResult.bio }}</p>
                    <div class="text-muted">
                        <strong>Starter Pack:</strong> {{ finalResult.starterPack }}
                    </div>
                </div>

                <div class="share-buttons">
                    <button @click="shareResult('facebook')" class="share-btn facebook">
                        <i class="fab fa-facebook-f me-2"></i>Facebook
                    </button>
                    <button @click="shareResult('twitter')" class="share-btn twitter">
                        <i class="fab fa-twitter me-2"></i>Twitter
                    </button>
                    <button @click="shareToInstagram" class="share-btn instagram">
                        <i class="fab fa-instagram me-2"></i>Instagram
                    </button>
                    <button @click="downloadResult" class="share-btn download">
                        <i class="fas fa-download me-2"></i>Save Image
                    </button>
                </div>

                <!-- The "Plug" Button -->
                <div class="mt-3">
                    <button @click="openGitHub" class="btn btn-outline-secondary btn-sm w-100" style="border-radius: 25px; font-size: 0.9rem;">
                        <i class="fab fa-instagram me-2"></i>I built this instead of sleeping. Stalk my IG.
                    </button>
                </div>

                <button @click="restartQuiz" class="btn btn-outline-primary mt-4 w-100">
                    <i class="fas fa-redo me-2"></i>Take Quiz Again
                </button>
            </div>
        </div>
    </div>

    <!-- Vue.js 3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const { createApp } = Vue;

        const quizData = {
            questions: [
                {
                    question: "It's 7:00 AM. How are you getting to your 8:30 class?",
                    choices: [
                        { text: "My driver is already outside. I'm just finishing my Nespresso.", icon: "fas fa-car", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 3 } },
                        { text: "Booking a Grab. I cannot deal with the heat today.", icon: "fas fa-mobile-alt", scores: { up: 0, admu: 2, dlsu: 1 }, subScores: { admu_chill: 2, dlsu_conyo: 1 } },
                        { text: "Ikot Jeep or walking. Cardio is life, struggle is real.", icon: "fas fa-walking", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_tibak: 2, up_delayed: 1 } },
                        { text: "Carpool with friends! We're passing by the drive-thru.", icon: "fas fa-users", scores: { up: 0, admu: 3, dlsu: 0 }, subScores: { admu_socialite: 3 } }
                    ]
                },
                {
                    question: "Your friend asks to hang out. What is your response?",
                    choices: [
                        { text: "G! Lezzgo. Where to? BGC?", icon: "fas fa-city", scores: { up: 0, admu: 1, dlsu: 2 }, subScores: { dlsu_conyo: 2, admu_chill: 1 } },
                        { text: "Carps. Solid. I'm down.", icon: "fas fa-thumbs-up", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_conyo: 3 } },
                        { text: "Sige, but I have to finish this paper first. Area 2?", icon: "fas fa-book", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_tibak: 2, up_delayed: 1 } },
                        { text: "Deins ako pwede, org meeting later!", icon: "fas fa-calendar", scores: { up: 0, admu: 3, dlsu: 0 }, subScores: { admu_socialite: 3 } }
                    ]
                },
                {
                    question: "Where are we eating lunch?",
                    choices: [
                        { text: "Mary Grace, Wildflour, or somewhere aesthetic.", icon: "fas fa-camera", scores: { up: 0, admu: 3, dlsu: 1 }, subScores: { admu_philosopher: 2, admu_socialite: 1, dlsu_royalty: 1 } },
                        { text: "Agno, Ate Rica's, or McDo Taft. Fast and greasy.", icon: "fas fa-hamburger", scores: { up: 1, admu: 0, dlsu: 2 }, subScores: { dlsu_conyo: 2, up_delayed: 1 } },
                        { text: "Rodic's Tapsilog or Fishball. Petsa de peligro na.", icon: "fas fa-coins", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_delayed: 2, up_tibak: 1 } },
                        { text: "Samgyup! My treat, kakakuha ko lang allowance.", icon: "fas fa-fire", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 2, dlsu_conyo: 1 } }
                    ]
                },
                {
                    question: "You failed a major exam. Reaction?",
                    choices: [
                        { text: "It's okay. Grades don't define me. I might shift courses.", icon: "fas fa-leaf", scores: { up: 0, admu: 3, dlsu: 0 }, subScores: { admu_chill: 2, admu_philosopher: 1 } },
                        { text: "Can I talk to the Dean? My dad knows him.", icon: "fas fa-phone", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 3 } },
                        { text: "First time? I'm already delayed. Part of the character arc.", icon: "fas fa-clock", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_delayed: 3 } },
                        { text: "Rage tweet about the system. Then study harder.", icon: "fas fa-angry", scores: { up: 2, admu: 1, dlsu: 0 }, subScores: { up_tibak: 2, admu_philosopher: 1 } }
                    ]
                },
                {
                    question: "It's Friday night. Where are you?",
                    choices: [
                        { text: "Xylo or The Palace. We got a table.", icon: "fas fa-cocktail", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 2, dlsu_shark: 1 } },
                        { text: "Pop Up Katipunan. Beer and feelings.", icon: "fas fa-beer", scores: { up: 0, admu: 3, dlsu: 0 }, subScores: { admu_chill: 2, admu_socialite: 1 } },
                        { text: "Dorm/Condo. Netflix or Valorant. Too tired.", icon: "fas fa-home", scores: { up: 1, admu: 1, dlsu: 0 }, subScores: { up_delayed: 1, admu_chill: 1 } },
                        { text: "Drinking Gin Bilog on a sidewalk or Cubao X.", icon: "fas fa-glass", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_tibak: 2, up_delayed: 1 } }
                    ]
                },
                {
                    question: "Pick your OOTD (Outfit).",
                    choices: [
                        { text: "Designer Streetwear (Off-White, Jordans, Essentials).", icon: "fas fa-tshirt", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 2, dlsu_shark: 1 } },
                        { text: "Linen shirt, shorts, Birkenstocks. Presko fit.", icon: "fas fa-sun", scores: { up: 0, admu: 3, dlsu: 0 }, subScores: { admu_chill: 3 } },
                        { text: "Org shirt, lanyard, jeans, heavy backpack.", icon: "fas fa-id-badge", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_tibak: 2, up_delayed: 1 } },
                        { text: "Whatever was on the floor.", icon: "fas fa-question", scores: { up: 2, admu: 0, dlsu: 0 }, subScores: { up_delayed: 2 } }
                    ]
                },
                {
                    question: "It's time for a group project. What is your role?",
                    choices: [
                        { text: "The Leader. I'll do everything because I don't trust you guys.", icon: "fas fa-crown", scores: { up: 0, admu: 2, dlsu: 2 }, subScores: { admu_socialite: 2, dlsu_shark: 2 } },
                        { text: "The Funder. I'll print the papers and buy the snacks. Just put my name on it.", icon: "fas fa-money-bill", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 3 } },
                        { text: "The Ghost. I will reply to the chat 1 hour before the deadline.", icon: "fas fa-ghost", scores: { up: 1, admu: 1, dlsu: 0 }, subScores: { up_delayed: 1, admu_chill: 1 } },
                        { text: "The Intellectual. I'll write the 'Analysis' part but refuse to format.", icon: "fas fa-brain", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_tibak: 3 } }
                    ]
                },
                {
                    question: "Choose your weapon (Gadget).",
                    choices: [
                        { text: "Latest MacBook Pro. Space Gray. Stickers from expensive brands.", icon: "fas fa-laptop", scores: { up: 0, admu: 3, dlsu: 0 }, subScores: { admu_philosopher: 2, admu_socialite: 1 } },
                        { text: "Gaming Laptop (ROG/Legion). Fans are louder than the prof.", icon: "fas fa-gamepad", scores: { up: 1, admu: 0, dlsu: 2 }, subScores: { dlsu_conyo: 2, up_delayed: 1 } },
                        { text: "iPad Pro with Magic Keyboard. I don't need a laptop, I'm 'minimalist'.", icon: "fas fa-tablet", scores: { up: 0, admu: 1, dlsu: 3 }, subScores: { dlsu_royalty: 2, dlsu_shark: 1, admu_chill: 1 } },
                        { text: "A battered ThinkPad/Dell that has survived 3 rallies and a flood.", icon: "fas fa-laptop-code", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_tibak: 2, up_delayed: 1 } }
                    ]
                },
                {
                    question: "You are stuck in traffic on EDSA. What are you listening to?",
                    choices: [
                        { text: "Taylor Swift (The Eras Tour Setlist) on repeat.", icon: "fas fa-music", scores: { up: 0, admu: 2, dlsu: 2 }, subScores: { admu_socialite: 2, dlsu_conyo: 2 } },
                        { text: "Indie OPM (Munimuni, The Ridleys). Magmumuni-muni lang.", icon: "fas fa-guitar", scores: { up: 2, admu: 2, dlsu: 0 }, subScores: { up_tibak: 1, up_delayed: 1, admu_philosopher: 2 } },
                        { text: "Podcast about 'Self-Improvement', 'Stocks', or 'Crypto'.", icon: "fas fa-podcast", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_shark: 3 } },
                        { text: "Angsty underground rap or Tubero.", icon: "fas fa-microphone", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_tibak: 3 } }
                    ]
                },
                {
                    question: "What is your relationship status?",
                    choices: [
                        { text: "Retrorunning. Situationship. It's complicated.", icon: "fas fa-heart-broken", scores: { up: 0, admu: 3, dlsu: 0 }, subScores: { admu_philosopher: 2, admu_chill: 1 } },
                        { text: "Single by choice (the choice is academic requirements).", icon: "fas fa-book-open", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_delayed: 2, up_tibak: 1 } },
                        { text: "Taken. We met in Boracay/La Union.", icon: "fas fa-heart", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 2, dlsu_conyo: 1 } },
                        { text: "Talking stage with 3 different people from 3 different schools.", icon: "fas fa-comments", scores: { up: 1, admu: 0, dlsu: 2 }, subScores: { dlsu_shark: 2, up_burgis: 1 } }
                    ]
                },
                {
                    question: "The professor cancels class last minute. What do you do?",
                    choices: [
                        { text: "Drive to Tagaytay for coffee. G na agad.", icon: "fas fa-car-side", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 2, dlsu_conyo: 1 } },
                        { text: "Study in the library anyway. Sayang tuition.", icon: "fas fa-book", scores: { up: 0, admu: 2, dlsu: 0 }, subScores: { admu_philosopher: 2 } },
                        { text: "Sleep on a bench or the grass. Finally, rest.", icon: "fas fa-bed", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_delayed: 3 } },
                        { text: "Inuman na! It's 10 AM but who cares.", icon: "fas fa-glass-cheers", scores: { up: 2, admu: 0, dlsu: 1 }, subScores: { up_tibak: 2, dlsu_conyo: 1 } }
                    ]
                },
                {
                    question: "It's finals week. What is your caffeine source?",
                    choices: [
                        { text: "Venti Oatmilk White Mocha with 2 pumps of...", icon: "fas fa-coffee", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 2, dlsu_conyo: 1 } },
                        { text: "Pour-over, single-origin beans, black. No sugar.", icon: "fas fa-mug-hot", scores: { up: 0, admu: 3, dlsu: 0 }, subScores: { admu_philosopher: 3 } },
                        { text: "Kopiko 78, Sting, or whatever is in the vending machine.", icon: "fas fa-bolt", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_delayed: 2, up_tibak: 1 } },
                        { text: "Matcha Latte. Coffee makes me palpitate.", icon: "fas fa-leaf", scores: { up: 0, admu: 2, dlsu: 1 }, subScores: { admu_chill: 2, dlsu_conyo: 1 } }
                    ]
                },
                {
                    question: "Where are you spending the break?",
                    choices: [
                        { text: "Europe or Japan. Family trip.", icon: "fas fa-plane", scores: { up: 0, admu: 1, dlsu: 3 }, subScores: { dlsu_royalty: 3, admu_philosopher: 1 } },
                        { text: "Elyu (La Union) or Siargao. Surfing and vibes.", icon: "fas fa-water", scores: { up: 0, admu: 3, dlsu: 1 }, subScores: { admu_chill: 3, dlsu_conyo: 1 } },
                        { text: "Summer sem. I need to catch up on units.", icon: "fas fa-graduation-cap", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_delayed: 3 } },
                        { text: "Internship. I need to build my LinkedIn.", icon: "fas fa-briefcase", scores: { up: 0, admu: 2, dlsu: 2 }, subScores: { admu_socialite: 2, dlsu_shark: 2 } }
                    ]
                },
                {
                    question: "You ran out of money. What do you do?",
                    choices: [
                        { text: "Call Dad/Mom. Transfer agad via online banking.", icon: "fas fa-phone", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 3 } },
                        { text: "Borrow from a friend, promise to pay via GCash.", icon: "fas fa-handshake", scores: { up: 0, admu: 2, dlsu: 1 }, subScores: { admu_socialite: 2, dlsu_conyo: 1 } },
                        { text: "Siomai Rice for 3 days straight. Kaya pa to.", icon: "fas fa-utensils", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_delayed: 2, up_tibak: 1 } },
                        { text: "Sell my old clothes/gadgets on Carousell.", icon: "fas fa-tags", scores: { up: 2, admu: 1, dlsu: 0 }, subScores: { up_delayed: 2, admu_chill: 1 } }
                    ]
                },
                {
                    question: "What is the goal after graduation?",
                    choices: [
                        { text: "Take over the family business.", icon: "fas fa-building", scores: { up: 0, admu: 0, dlsu: 3 }, subScores: { dlsu_royalty: 2, dlsu_shark: 1 } },
                        { text: "Law School or working for an NGO.", icon: "fas fa-balance-scale", scores: { up: 1, admu: 3, dlsu: 0 }, subScores: { admu_philosopher: 2, admu_socialite: 1, up_tibak: 1 } },
                        { text: "Corporate slave or Med School.", icon: "fas fa-user-tie", scores: { up: 0, admu: 1, dlsu: 1 }, subScores: { admu_socialite: 1, dlsu_shark: 1 } },
                        { text: "Serve the people (or disappear to the mountains).", icon: "fas fa-fist-raised", scores: { up: 3, admu: 0, dlsu: 0 }, subScores: { up_tibak: 3 } }
                    ]
                }
            ],
            archetypes: {
                // DLSU Archetypes
                dlsu_royalty: {
                    title: "The Taft Royalty (The Nepo Baby)",
                    university: "DLSU",
                    tagline: "School is my side hustle.",
                    bio: "You drive a car that costs more than a house. You consider attendance \"optional\" and Balesin your second campus. You've never touched a rag in your life, but you handle \"business\" like a pro.",
                    starterPack: "Fortuner/Raptor â€¢ Amanpulo trips â€¢ \"Ask ko si Daddy\"",
                    color: "#006633",
                    bgColor: "#006633"
                },
                dlsu_conyo: {
                    title: "The Happy-Go-Lucky Conyo",
                    university: "DLSU",
                    tagline: "Carps? Sheesh.",
                    bio: "You are allergic to stress. You pass subjects purely on \"vibes\" and groupmates carrying you. Your vocabulary is 90% slang. You are definitely going to Laboracay even if you have finals week.",
                    starterPack: "Vape â€¢ \"Solid bro\" â€¢ Agno heavy meals â€¢ Cutting classes",
                    color: "#006633",
                    bgColor: "#006633"
                },
                dlsu_shark: {
                    title: "The Business Shark",
                    university: "DLSU",
                    tagline: "Open Minded Ka Ba?",
                    bio: "You wear a suit in 35-degree heat. You trade crypto during Theology class. You calculate the ROI of your relationships. You don't just want a diploma; you want a conglomerate.",
                    starterPack: "LinkedIn Premium â€¢ Macalister Hall â€¢ \"Let's connect\"",
                    color: "#006633",
                    bgColor: "#006633"
                },
                // ADMU Archetypes
                admu_philosopher: {
                    title: "The English-Speaking Philosopher",
                    university: "ADMU",
                    tagline: "It's about the nuance.",
                    bio: "You don't talk; you discourse. You love deconstructing sociopolitical issues while sipping an overpriced artisanal latte in Katipunan. You speak with a specific accent that scares Grab drivers.",
                    starterPack: "Tote bag â€¢ Film camera â€¢ Using the word \"inherently\"",
                    color: "#003366",
                    bgColor: "#003366"
                },
                admu_socialite: {
                    title: "The \"Org is Life\" Socialite",
                    university: "ADMU",
                    tagline: "Bibbo Kid of Katipunan.",
                    bio: "You have 5 executive positions and sleep 3 hours a day. You are fighting for social justice in the morning and partying at Pop Up in the evening. You know everyone.",
                    starterPack: "Google Calendar is full â€¢ \"Blue Energy\" â€¢ 3-page Resume",
                    color: "#003366",
                    bgColor: "#003366"
                },
                admu_chill: {
                    title: "The Chill \"Pards\"",
                    university: "ADMU",
                    tagline: "Solid pards.",
                    bio: "You play ultimate frisbee/futsal and strictly wear oversized shirts. You get B+ grades without trying. You are effortlessly cool and low-key rich. You drive your friends to Antipolo for \"clouds\" at 2 AM.",
                    starterPack: "Guitar â€¢ Car keys â€¢ JSEC meals â€¢ Sleeping in the library",
                    color: "#003366",
                    bgColor: "#003366"
                },
                // UP Archetypes
                up_burgis: {
                    title: "The U.P. Town Center \"Burgis\"",
                    university: "UP",
                    tagline: "Conyo with a cause.",
                    bio: "You study in UP but live the Ateneo lifestyle. You refuse to eat at the canteen; it has to be Starbucks or UPTC. You bridge the gap between the struggle and the aircon. You are \"one with the masses\" (via iPhone 16).",
                    starterPack: "Private car but parks far away â€¢ Starbucks planner â€¢ Aesthetic notes",
                    color: "#8B0000",
                    bgColor: "#8B0000"
                },
                up_tibak: {
                    title: "The \"Tibak\" (Activist)",
                    university: "UP",
                    tagline: "Serve the People.",
                    bio: "You've attended more rallies than parties. You can quote history books from memory. You win every argument at family reunions (and your Titos hate it). You own a Sablay even if you haven't graduated yet.",
                    starterPack: "Red scarf â€¢ Megaphone â€¢ Cigarettes â€¢ Intense gaze",
                    color: "#8B0000",
                    bgColor: "#8B0000"
                },
                up_delayed: {
                    title: "The \"Delayed\" Legend",
                    university: "UP",
                    tagline: "Maximum Residency.",
                    bio: "The campus is your home. You know every guard by name. You survive on Pancit Canton and spite. Graduation is a myth; survival is the reality. You are the scariest person during enlistment.",
                    starterPack: "Form 5 issues â€¢ Eyebags â€¢ Photox readings â€¢ \"Isang sem na lang (daw)\"",
                    color: "#8B0000",
                    bgColor: "#8B0000"
                }
            }
        };

        createApp({
            data() {
                return {
                    currentView: 'landing',
                    userNickname: '',
                    userIgHandle: '',
                    currentQuestion: 0,
                    universityScores: {
                        up: 0,
                        admu: 0,
                        dlsu: 0
                    },
                    subScores: {
                        // UP sub-scores
                        up_burgis: 0,
                        up_tibak: 0,
                        up_delayed: 0,
                        // ADMU sub-scores
                        admu_philosopher: 0,
                        admu_socialite: 0,
                        admu_chill: 0,
                        // DLSU sub-scores
                        dlsu_royalty: 0,
                        dlsu_conyo: 0,
                        dlsu_shark: 0
                    },
                    finalResult: null,
                    resultImageUrl: null,
                    quizData: quizData
                }
            },
            methods: {
                startQuiz() {
                    this.currentView = 'quiz';
                    this.currentQuestion = 0;
                    this.resetScores();
                },
                
                resetScores() {
                    // Reset university scores
                    Object.keys(this.universityScores).forEach(key => {
                        this.universityScores[key] = 0;
                    });
                    // Reset sub-scores
                    Object.keys(this.subScores).forEach(key => {
                        this.subScores[key] = 0;
                    });
                },
                
                selectAnswer(choice) {
                    // Add university scores
                    Object.keys(choice.scores).forEach(university => {
                        this.universityScores[university] += choice.scores[university];
                    });
                    
                    // Add sub-scores if they exist
                    if (choice.subScores) {
                        Object.keys(choice.subScores).forEach(archetype => {
                            if (this.subScores.hasOwnProperty(archetype)) {
                                this.subScores[archetype] += choice.subScores[archetype];
                            }
                        });
                    }
                    
                    // Move to next question or show result
                    if (this.currentQuestion < this.quizData.questions.length - 1) {
                        this.currentQuestion++;
                    } else {
                        this.showResult();
                    }
                },
                
                showResult() {
                    // First, determine which university scored highest
                    let maxUniversityScore = 0;
                    let winningUniversity = 'up';
                    
                    Object.keys(this.universityScores).forEach(university => {
                        if (this.universityScores[university] > maxUniversityScore) {
                            maxUniversityScore = this.universityScores[university];
                            winningUniversity = university;
                        }
                    });
                    
                    // Then, find the highest sub-score within that university
                    let maxSubScore = 0;
                    let resultKey = '';
                    
                    // Get all archetypes for the winning university
                    const universityArchetypes = Object.keys(this.subScores).filter(key => 
                        key.startsWith(winningUniversity + '_')
                    );
                    
                    universityArchetypes.forEach(archetype => {
                        if (this.subScores[archetype] > maxSubScore) {
                            maxSubScore = this.subScores[archetype];
                            resultKey = archetype;
                        }
                    });
                    
                    // If no sub-scores or tie, randomly pick from university archetypes
                    if (!resultKey || maxSubScore === 0) {
                        const randomIndex = Math.floor(Math.random() * universityArchetypes.length);
                        resultKey = universityArchetypes[randomIndex];
                    }
                    
                    this.finalResult = this.quizData.archetypes[resultKey];
                    this.currentView = 'result';
                    
                    // Generate result image
                    this.$nextTick(() => {
                        this.generateResultImage();
                    });
                },
                
                generateResultImage() {
                    const canvas = this.$refs.resultCanvas;
                    const ctx = canvas.getContext('2d');
                    
                    // Set canvas size for Instagram story format (9:16 ratio)
                    canvas.width = 1080;
                    canvas.height = 1920;
                    
                    // Background - solid color
                    ctx.fillStyle = this.finalResult.bgColor;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    // Add subtle gradient overlay
                    const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                    gradient.addColorStop(0, this.finalResult.bgColor);
                    gradient.addColorStop(1, this.adjustColor(this.finalResult.bgColor, -40));
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    // Add decorative circles for visual interest
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.08)';
                    for (let i = 0; i < 15; i++) {
                        ctx.beginPath();
                        ctx.arc(
                            Math.random() * canvas.width,
                            Math.random() * canvas.height,
                            Math.random() * 80 + 40,
                            0,
                            2 * Math.PI
                        );
                        ctx.fill();
                    }
                    
                    // Header: "CERTIFIED" text
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                    ctx.font = 'bold 48px Poppins, Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('CERTIFIED', canvas.width / 2, 150);
                    
                    // User's IG Handle or random nickname
                    let displayName = '';
                    if (this.userIgHandle.trim()) {
                        displayName = this.userIgHandle.startsWith('@') ? this.userIgHandle : '@' + this.userIgHandle;
                    } else {
                        const randomNicknames = ['BESTIE', 'BRO', 'SIS', 'FAM', 'DUDE', 'PARE', 'MARS', 'TOL'];
                        displayName = randomNicknames[Math.floor(Math.random() * randomNicknames.length)];
                    }
                    
                    // Name in large, bold gold/yellow text
                    ctx.fillStyle = '#FFD700'; // Gold color
                    ctx.font = 'bold 72px Poppins, Arial';
                    ctx.fillText(displayName.toUpperCase(), canvas.width / 2, 280);
                    
                    // "You are..." text
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                    ctx.font = '36px Poppins, Arial';
                    ctx.fillText('You are...', canvas.width / 2, 380);
                    
                    // Archetype Title - adaptive font size
                    let titleFontSize = 56;
                    ctx.font = `bold ${titleFontSize}px Poppins, Arial`;
                    ctx.fillStyle = 'white';
                    
                    // Adjust font size if title is too long
                    while (ctx.measureText(this.finalResult.title).width > canvas.width - 80 && titleFontSize > 32) {
                        titleFontSize -= 4;
                        ctx.font = `bold ${titleFontSize}px Poppins, Arial`;
                    }
                    
                    const titleLines = this.wrapText(ctx, this.finalResult.title, canvas.width - 80);
                    let y = 480;
                    titleLines.forEach(line => {
                        ctx.fillText(line, canvas.width / 2, y);
                        y += titleFontSize + 10;
                    });
                    
                    // University badge
                    y += 40;
                    const badgeWidth = 200;
                    const badgeHeight = 60;
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                    ctx.fillRect(canvas.width / 2 - badgeWidth/2, y - badgeHeight/2, badgeWidth, badgeHeight);
                    ctx.fillStyle = this.finalResult.bgColor;
                    ctx.font = 'bold 32px Poppins, Arial';
                    ctx.fillText(this.finalResult.university, canvas.width / 2, y + 8);
                    
                    // Tagline in quotes
                    y += 100;
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                    ctx.font = 'bold 40px Poppins, Arial';
                    const taglineLines = this.wrapText(ctx, `"${this.finalResult.tagline}"`, canvas.width - 100);
                    taglineLines.forEach(line => {
                        ctx.fillText(line, canvas.width / 2, y);
                        y += 50;
                    });
                    
                    // Bio text - wrapped in center
                    y += 60;
                    ctx.fillStyle = 'white';
                    let bioFontSize = 28;
                    ctx.font = `${bioFontSize}px Poppins, Arial`;
                    const bioLines = this.wrapText(ctx, this.finalResult.bio, canvas.width - 120);
                    
                    // Adjust bio font size if too many lines
                    if (bioLines.length > 8) {
                        bioFontSize = 24;
                        ctx.font = `${bioFontSize}px Poppins, Arial`;
                    }
                    
                    bioLines.forEach(line => {
                        ctx.fillText(line, canvas.width / 2, y);
                        y += bioFontSize + 12;
                    });
                    
                    // Starter Pack section
                    y += 80;
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                    ctx.font = 'bold 32px Poppins, Arial';
                    ctx.fillText('STARTER PACK:', canvas.width / 2, y);
                    
                    y += 50;
                    ctx.font = '28px Poppins, Arial';
                    const starterPackLines = this.wrapText(ctx, this.finalResult.starterPack, canvas.width - 120);
                    starterPackLines.forEach(line => {
                        ctx.fillText(line, canvas.width / 2, y);
                        y += 36;
                    });
                    
                    // The Lowkey Flex (Watermark) - monospace font at bottom
                    ctx.font = '20px Monaco, Courier, monospace';
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
                    ctx.fillText('Coded by @LobenKT', canvas.width / 2, canvas.height - 40);
                    
                    // Convert to image
                    this.resultImageUrl = canvas.toDataURL('image/png');
                },
                
                wrapText(ctx, text, maxWidth) {
                    const words = text.split(' ');
                    const lines = [];
                    let currentLine = words[0];
                    
                    for (let i = 1; i < words.length; i++) {
                        const word = words[i];
                        const width = ctx.measureText(currentLine + ' ' + word).width;
                        if (width < maxWidth) {
                            currentLine += ' ' + word;
                        } else {
                            lines.push(currentLine);
                            currentLine = word;
                        }
                    }
                    lines.push(currentLine);
                    return lines;
                },
                
                adjustColor(color, amount) {
                    const usePound = color[0] === '#';
                    const col = usePound ? color.slice(1) : color;
                    const num = parseInt(col, 16);
                    let r = (num >> 16) + amount;
                    let g = (num >> 8 & 0x00FF) + amount;
                    let b = (num & 0x0000FF) + amount;
                    r = r > 255 ? 255 : r < 0 ? 0 : r;
                    g = g > 255 ? 255 : g < 0 ? 0 : g;
                    b = b > 255 ? 255 : b < 0 ? 0 : b;
                    return (usePound ? '#' : '') + (r << 16 | g << 8 | b).toString(16).padStart(6, '0');
                },
                
                shareResult(platform) {
                    const text = `I got "${this.finalResult.title}" in the Big 3 University Quiz! What's your stereotype?`;
                    const url = window.location.href;
                    
                    let shareUrl = '';
                    switch (platform) {
                        case 'facebook':
                            shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(text)}`;
                            break;
                        case 'twitter':
                            shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
                            break;
                    }
                    
                    if (shareUrl) {
                        window.open(shareUrl, '_blank', 'width=600,height=400');
                    }
                },
                
                shareToInstagram() {
                    // For mobile devices, try to open Instagram directly
                    if (navigator.share && navigator.canShare) {
                        // Convert canvas to blob for native sharing
                        this.$refs.resultCanvas.toBlob((blob) => {
                            const file = new File([blob], 'big3-quiz-result.png', { type: 'image/png' });
                            if (navigator.canShare({ files: [file] })) {
                                navigator.share({
                                    title: 'My Big 3 University Quiz Result!',
                                    text: `I got "${this.finalResult.title}" in the Big 3 University Quiz!`,
                                    files: [file]
                                });
                            } else {
                                this.downloadResult();
                            }
                        });
                    } else {
                        // Fallback: download the image
                        this.downloadResult();
                        // Show instruction
                        alert('Image saved! You can now upload it to your Instagram story ðŸ“¸');
                    }
                },
                
                downloadResult() {
                    const link = document.createElement('a');
                    link.download = `big3-quiz-result.png`;
                    link.href = this.resultImageUrl;
                    link.click();
                },
                
                openGitHub() {
                    window.open('https://www.instagram.com/lobenkt/', '_blank');
                },
                
                restartQuiz() {
                    this.currentView = 'landing';
                    this.userNickname = '';
                    this.userIgHandle = '';
                    this.currentQuestion = 0;
                    this.resetScores();
                    this.finalResult = null;
                    this.resultImageUrl = null;
                }
            }
        }).mount('#app');
    </script>
</body>
</html>